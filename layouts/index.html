{{ $translation := ( index $.Site.Data.translations $.Site.Params.language ) }}
{{ partial "head.html" . }}
  <body class="page-vote">
    
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TDRBDKS"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->    
    
    {{ partial "header.html" . }}
    <div class="page-vote-main" id="main" role="main">

      <a class="usa-skipnav" href="#main-content">Skip main navigation</a>

      <div class="grid-container" id="main-content">

      <!-- Register BEGIN -->
      <section class="page-section register" id="register">
        <header>
          <h1 class="usa-display vote-heading">{{ $translation.homepage.header }}</h1>
        </header>

        <!--Test!!!!!-->

        <center>
        <iframe style="border-style: none;" src="https://datamade.github.io/my-reps/" height="250" width="800"></iframe>
        </center>

        <div class="usa-alert usa-alert--warning covid-alert">
          <div class="usa-alert__body">
            <p class="usa-alert__text">{{ $translation.homepage.alert.alert_msg }}</p>
          </div>
        </div>

        <form class="form-register" method="get" id="register">
          <p>{{ $translation.homepage.state_selection.label }}</p>
          <label class="usa-sr-only" for="js-user-selection">
            {{ $translation.homepage.state_selection.default }}
          </label>
          <select class="usa-select" name="userselection" id="js-user-selection">
            <option value="default">
              {{ $translation.homepage.state_selection.default }}
            </option>
          {{ range where (.Data.Pages.ByParam "state_name") "Section" .Site.Params.register_path }}
            {{ if eq $.Site.Params.language "spanish" }}
              <option value="{{ .Params.state_abbreviation | lower }}">{{ .Params.state_name }}</option>
            {{ else }}
              <option value="{{ .Params.state_abbreviation | lower }}">{{ .Params.state_name }}</option>
            {{ end }}
          {{ end }}
          </select>
          <button class="usa-button usa-button--secondary" id="js-user-submit" type="submit">
            {{ $translation.homepage.state_selection.submit }}
          </button>
        </form>
      </section>
      <!-- Register END -->

      <!-- Already Registered BEGIN -->
      <section class="page-section registered" id="already-registered">
        <header>
          <h1 class="usa-display vote-heading">{{ $translation.homepage.registered.header }}</h1>
        </header>
        <div class="voter-resources">
          <p>{{ $translation.homepage.registered.resources_intro }} <a href="{{ $translation.homepage.registered.resources_link_url }}">{{ $translation.homepage.registered.resources_link_text }}</a> {{ $translation.homepage.registered.resources_on }} <a href="{{ $translation.homepage.registered.resources_website_url }}">{{ $translation.homepage.registered.resources_website }}:</a></p>
          <ul class="registered-resources">
            <li><a href="{{ $translation.homepage.registered_links.electionday_url }}">{{ $translation.homepage.registered_links.electionday }}</a></li>
            <li><a href="{{ $translation.homepage.registered_links.voterid_url }}">{{ $translation.homepage.registered_links.voterid }}</a></li>
            <li><a href="{{ $translation.homepage.registered_links.process_url }}">{{ $translation.homepage.registered_links.process }}</a></li>
          </ul>
        </div>
      </section>
      <!-- Already Registered END -->

      </div>

      <!-- Footer BEGIN -->
      <footer>
        <div class="footer-graphic">
          <img src="{{ .Site.BaseURL }}/assets/img/ballot_box-blue.svg" alt="Web design standards">
        </div>

        {{ partial "footer.html" . }}
      </footer>
      <!-- Footer END -->

    </div>

    <script type="text/javascript">
   document.getElementById('register').onsubmit = function(ev) {
     var stateSelected = document.getElementById('js-user-selection').value;
     if (stateSelected === 'default') {
       return false;
     }
     else {
       ev.preventDefault();
       {{ if eq $.Site.Params.language "english" }}
         // var redirectURL = window.location.protocol + '//' + window.location.host + '/{{ .Site.Params.root_path }}register/';
         var redirectURL = {{$.Site.BaseURL}} + '/{{ .Site.Params.root_path }}register/'
       {{ else }}
         var redirectURL = {{$.Site.BaseURL}} + '/{{ .Site.Params.root_path }}registrar/';
       {{ end }}
       redirectURL = redirectURL + stateSelected + '/';
       window.location.href = redirectURL;
     }
   };
 </script>

    <script type="text/javascript">
		document.getElementById('register').onsubmit = function(ev) {
			var stateSelected = document.getElementById('js-user-selection').value;
			if (stateSelected === 'default') {
				return false;
			}
			else {
				ev.preventDefault();
				{{ if eq $.Site.Params.language "english" }}
					var redirectURL = {{ $.Site.BaseURL }} + '/{{ .Site.Params.root_path }}register/';
				{{ else }}
					var redirectURL = {{ $.Site.BaseURL }} + '/{{ .Site.Params.root_path }}registrar/';
				{{ end }}
				redirectURL = redirectURL + stateSelected + '/';
				window.location.href = redirectURL;
			}
		};
	</script>

    {{ partial "analytics.html" . }}
    {{ partial "scripts.html" . }}
    
    <script type="text/javascript" src="//script.crazyegg.com/pages/scripts/0007/9651.js" async="async"></script>

  </body>

</html>
